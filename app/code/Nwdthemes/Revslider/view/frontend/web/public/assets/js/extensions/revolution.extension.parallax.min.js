require(["jquery","themepunchTools"],function(e,m){"use strict";var T=jQuery.fn.revolution,_=T.is_mobile(),a={alias:"Parallax Min JS",name:"revolution.extensions.parallax.min.js",min_core:"5.4.5",version:"2.2.3"};function L(e,r){e.lastscrolltop=r}jQuery.extend(!0,T,{checkForParallax:function(y,g){if("stop"===T.compare_version(a).check)return!1;var b=g.parallax;if(!b.done){if(b.done=!0,_&&"on"==b.disable_onmobile)return!1;"3D"!=b.type&&"3d"!=b.type||(m.TweenLite.set(g.c,{overflow:b.ddd_overflow}),m.TweenLite.set(g.ul,{overflow:b.ddd_overflow}),"carousel"!=g.sliderType&&"on"==b.ddd_shadow&&(g.c.prepend('<div class="dddwrappershadow"></div>'),m.TweenLite.set(g.c.find(".dddwrappershadow"),{force3D:"auto",transformPerspective:1600,transformOrigin:"50% 50%",width:"100%",height:"100%",position:"absolute",top:0,left:0,zIndex:0}))),g.li.each(function(){t(jQuery(this))}),("3D"==b.type||"3d"==b.type)&&0<g.c.find(".tp-static-layers").length&&(m.TweenLite.set(g.c.find(".tp-static-layers"),{top:0,left:0,width:"100%",height:"100%"}),t(g.c.find(".tp-static-layers"))),b.pcontainers=new Array,b.pcontainer_depths=new Array,b.bgcontainers=new Array,b.bgcontainer_depths=new Array,g.c.find(".tp-revslider-slidesli .slotholder, .tp-revslider-slidesli .rs-background-video-layer").each(function(){var e=jQuery(this),r=e.data("bgparallax")||g.parallax.bgparallax;void 0!==(r="on"==r?1:r)&&"off"!==r&&(b.bgcontainers.push(e),b.bgcontainer_depths.push(g.parallax.levels[parseInt(r,0)-1]/100))});for(var r=1;r<=b.levels.length;r++)g.c.find(".rs-parallaxlevel-"+r).each(function(){var e=jQuery(this).closest(".tp-parallax-wrap");e.data("parallaxlevel",b.levels[r-1]),e.addClass("tp-parallax-container"),b.pcontainers.push(e),b.pcontainer_depths.push(b.levels[r-1])});"mouse"!=b.type&&"scroll+mouse"!=b.type&&"mouse+scroll"!=b.type&&"3D"!=b.type&&"3d"!=b.type||(y.mouseenter(function(e){var r=y.find(".active-revslide"),t=y.offset().top,a=y.offset().left,i=e.pageX-a,l=e.pageY-t;r.data("enterx",i),r.data("entery",l)}),y.on("mousemove.hoverdir, mouseleave.hoverdir, trigger3dpath",function(d,e){var r=e&&e.li?e.li:y.find(".active-revslide");if("enterpoint"==b.origo){var t=y.offset().top,a=y.offset().left;null==r.data("enterx")&&r.data("enterx",d.pageX-a),null==r.data("entery")&&r.data("entery",d.pageY-t);var i=r.data("enterx")||d.pageX-a,l=r.data("entery")||d.pageY-t,p=i-(d.pageX-a),c=l-(d.pageY-t),f=b.speed/1e3||.4}else t=y.offset().top,a=y.offset().left,p=g.conw/2-(d.pageX-a),c=g.conh/2-(d.pageY-t),f=b.speed/1e3||3;"mouseleave"==d.type&&(p=b.ddd_lasth||0,c=b.ddd_lastv||0,f=1.5);for(var o=0;o<b.pcontainers.length;o++){var s=b.pcontainers[o],n=b.pcontainer_depths[o],w="3D"==b.type||"3d"==b.type?n/200:n/100,u=p*w,v=c*w;"scroll+mouse"==b.type||"mouse+scroll"==b.type?m.TweenLite.to(s,f,{force3D:"auto",x:u,ease:m.Power3.easeOut,overwrite:"all"}):m.TweenLite.to(s,f,{force3D:"auto",x:u,y:v,ease:m.Power3.easeOut,overwrite:"all"})}if("3D"==b.type||"3d"==b.type){var h=".tp-revslider-slidesli .dddwrapper, .dddwrappershadow, .tp-revslider-slidesli .dddwrapper-layer, .tp-static-layers .dddwrapper-layer";"carousel"===g.sliderType&&(h=".tp-revslider-slidesli .dddwrapper, .tp-revslider-slidesli .dddwrapper-layer, .tp-static-layers .dddwrapper-layer"),g.c.find(h).each(function(){var e=jQuery(this),r=b.levels[b.levels.length-1]/200,t=p*r,a=c*r,i=0==g.conw?0:Math.round(p/g.conw*r*100)||0,l=0==g.conh?0:Math.round(c/g.conh*r*100)||0,o=e.closest("li"),s=0,n=!1;e.hasClass("dddwrapper-layer")&&(s=b.ddd_z_correction||65,n=!0),e.hasClass("dddwrapper-layer")&&(a=t=0),o.hasClass("active-revslide")||"carousel"!=g.sliderType?"on"!=b.ddd_bgfreeze||n?m.TweenLite.to(e,f,{rotationX:l,rotationY:-i,x:t,z:s,y:a,ease:m.Power3.easeOut,overwrite:"all"}):m.TweenLite.to(e,.5,{force3D:"auto",rotationY:0,rotationX:0,z:0,ease:m.Power3.easeOut,overwrite:"all"}):m.TweenLite.to(e,.5,{force3D:"auto",rotationY:0,x:0,y:0,rotationX:0,z:0,ease:m.Power3.easeOut,overwrite:"all"}),"mouseleave"==d.type&&m.TweenLite.to(jQuery(this),3.8,{z:0,ease:m.Power3.easeOut})})}}),_&&(window.ondeviceorientation=function(d){var e=Math.round(d.beta||0)-70,r=Math.round(d.gamma||0),t=y.find(".active-revslide");if(jQuery(window).width()>jQuery(window).height()){var a=r;r=e,e=a}var i=y.width(),l=y.height(),p=360/i*r,c=180/l*e,f=b.speed/1e3||3,o=[];if(t.find(".tp-parallax-container").each(function(e){o.push(jQuery(this))}),y.find(".tp-static-layers .tp-parallax-container").each(function(){o.push(jQuery(this))}),jQuery.each(o,function(){var e=jQuery(this),r=parseInt(e.data("parallaxlevel"),0)/100,t=p*r*2,a=c*r*4;m.TweenLite.to(e,f,{force3D:"auto",x:t,y:a,ease:m.Power3.easeOut,overwrite:"all"})}),"3D"==b.type||"3d"==b.type){var s=".tp-revslider-slidesli .dddwrapper, .dddwrappershadow, .tp-revslider-slidesli .dddwrapper-layer, .tp-static-layers .dddwrapper-layer";"carousel"===g.sliderType&&(s=".tp-revslider-slidesli .dddwrapper, .tp-revslider-slidesli .dddwrapper-layer, .tp-static-layers .dddwrapper-layer"),g.c.find(s).each(function(){var e=jQuery(this),r=b.levels[b.levels.length-1]/200,t=p*r,a=c*r*3,i=0==g.conw?0:Math.round(p/g.conw*r*500)||0,l=0==g.conh?0:Math.round(c/g.conh*r*700)||0,o=e.closest("li"),s=0,n=!1;e.hasClass("dddwrapper-layer")&&(s=b.ddd_z_correction||65,n=!0),e.hasClass("dddwrapper-layer")&&(a=t=0),o.hasClass("active-revslide")||"carousel"!=g.sliderType?"on"!=b.ddd_bgfreeze||n?m.TweenLite.to(e,f,{rotationX:l,rotationY:-i,x:t,z:s,y:a,ease:m.Power3.easeOut,overwrite:"all"}):m.TweenLite.to(e,.5,{force3D:"auto",rotationY:0,rotationX:0,z:0,ease:m.Power3.easeOut,overwrite:"all"}):m.TweenLite.to(e,.5,{force3D:"auto",rotationY:0,z:0,x:0,y:0,rotationX:0,ease:m.Power3.easeOut,overwrite:"all"}),"mouseleave"==d.type&&m.TweenLite.to(jQuery(this),3.8,{z:0,ease:m.Power3.easeOut})})}}));var e=g.scrolleffect;if(e.bgs=new Array,e.on){if("on"===e.on_slidebg)for(r=0;r<g.allslotholder.length;r++)e.bgs.push(g.allslotholder[r]);e.multiplicator_layers=parseFloat(e.multiplicator_layers),e.multiplicator=parseFloat(e.multiplicator)}void 0!==e.layers&&0===e.layers.length&&(e.layers=!1),void 0!==e.bgs&&0===e.bgs.length&&(e.bgs=!1),T.scrollTicker(g,y)}function t(e){if("3D"==b.type||"3d"==b.type){e.find(".slotholder").wrapAll('<div class="dddwrapper" style="width:100%;height:100%;position:absolute;top:0px;left:0px;overflow:hidden"></div>'),e.find(".tp-parallax-wrap").wrapAll('<div class="dddwrapper-layer" style="width:100%;height:100%;position:absolute;top:0px;left:0px;z-index:5;overflow:'+b.ddd_layer_overflow+';"></div>'),e.find(".rs-parallaxlevel-tobggroup").closest(".tp-parallax-wrap").wrapAll('<div class="dddwrapper-layertobggroup" style="position:absolute;top:0px;left:0px;z-index:50;width:100%;height:100%"></div>');var r=e.find(".dddwrapper"),t=e.find(".dddwrapper-layer");e.find(".dddwrapper-layertobggroup").appendTo(r),"carousel"==g.sliderType&&("on"==b.ddd_shadow&&r.addClass("dddwrappershadow"),m.TweenLite.set(r,{borderRadius:g.carousel.border_radius})),m.TweenLite.set(e,{overflow:"visible",transformStyle:"preserve-3d",perspective:1600}),m.TweenLite.set(r,{force3D:"auto",transformOrigin:"50% 50%"}),m.TweenLite.set(t,{force3D:"auto",transformOrigin:"50% 50%",zIndex:5}),m.TweenLite.set(g.ul,{transformStyle:"preserve-3d",transformPerspective:1600})}}},scrollTicker:function(r,e){1!=r.scrollTicker&&(r.scrollTicker=!0,_?(m.TweenLite.ticker.fps(150),m.TweenLite.ticker.addEventListener("tick",function(){T.scrollHandling(r)},e,!1,1)):document.addEventListener("scroll",function(e){T.scrollHandling(r,!0)},{passive:!0})),T.scrollHandling(r,!0)},scrollHandling:function(e,r,t){if(e.lastwindowheight=e.lastwindowheight||window.innerHeight,e.conh=0===e.conh||void 0===e.conh?e.infullscreenmode?e.minHeight:e.c.height():e.conh,e.lastscrolltop==window.scrollY&&!e.duringslidechange&&!r)return!1;m.TweenLite.delayedCall(.2,L,[e,window.scrollY]);var a=e.c[0].getBoundingClientRect(),i=e.viewPort,l=e.parallax,o=a.top<0||a.height>e.lastwindowheight?a.top/a.height:a.bottom>e.lastwindowheight?(a.bottom-e.lastwindowheight)/a.height:0;if(e.scrollproc=o,T.callBackHandling&&T.callBackHandling(e,"parallax","start"),i.enable){var s=1-Math.abs(o);s=s<0?0:s,jQuery.isNumeric(i.visible_area)||-1!==i.visible_area.indexOf("%")&&(i.visible_area=parseInt(i.visible_area)/100),1-i.visible_area<=s?e.inviewport||(e.inviewport=!0,T.enterInViewPort(e)):e.inviewport&&(e.inviewport=!1,T.leaveViewPort(e))}if(_&&"on"==l.disable_onmobile)return!1;if("3d"!=l.type&&"3D"!=l.type){if(("scroll"==l.type||"scroll+mouse"==l.type||"mouse+scroll"==l.type)&&l.pcontainers)for(var n=0;n<l.pcontainers.length;n++)if(0<l.pcontainers[n].length){var d=l.pcontainers[n],p=l.pcontainer_depths[n]/100,c=Math.round(o*(-p*e.conh)*10)/10||0,f=void 0!==t?t:l.speedls/1e3||0;d.data("parallaxoffset",c),m.TweenLite.to(d,f,{overwrite:"auto",force3D:"auto",y:c})}if(l.bgcontainers)for(n=0;n<l.bgcontainers.length;n++){var w=l.bgcontainers[n];c=o*(-l.bgcontainer_depths[n]*e.conh)||0,f=void 0!==t?t:l.speedbg/1e3||0;m.TweenLite.to(w,f,{position:"absolute",top:"0px",left:"0px",backfaceVisibility:"hidden",force3D:"true",y:c+"px"})}}var u=e.scrolleffect;if(u.on&&("on"!==u.disable_on_mobile||!_)){var v=Math.abs(o)-u.tilt/100;if(v=v<0?0:v,!1!==u.layers){var h=1-v*u.multiplicator_layers,y={backfaceVisibility:"hidden",force3D:"true",z:.001,perspective:600};if("top"==u.direction&&0<=o&&(h=1),"bottom"==u.direction&&o<=0&&(h=1),h=1<h?1:h<0?0:h,"on"===u.fade&&(y.opacity=h),"on"===u.scale){var g=h;y.scale=1-g+1}if("on"===u.blur){var b=(1-h)*u.maxblur;y["-webkit-filter"]="blur("+b+"px)",y.filter="blur("+b+"px)"}if("on"===u.grayscale){var x="grayscale("+100*(1-h)+"%)";y["-webkit-filter"]=void 0===y["-webkit-filter"]?x:y["-webkit-filter"]+" "+x,y.filter=void 0===y.filter?x:y.filter+" "+x}m.TweenLite.set(u.layers,y)}if(!1!==u.bgs){h=1-v*u.multiplicator,y={backfaceVisibility:"hidden",force3D:"true"};if("top"==u.direction&&0<=o&&(h=1),"bottom"==u.direction&&o<=0&&(h=1),h=1<h?1:h<0?0:h,"on"===u.fade&&(y.opacity=h),"on"===u.scale){g=h;m.TweenLite.set(jQuery(".tp-kbimg-wrap"),{transformOrigin:"50% 50%",scale:g,force3D:!0})}if("on"===u.blur){b=(1-h)*u.maxblur;y["-webkit-filter"]="blur("+b+"px)",y.filter="blur("+b+"px)"}if("on"===u.grayscale){x="grayscale("+100*(1-h)+"%)";y["-webkit-filter"]=void 0===y["-webkit-filter"]?x:y["-webkit-filter"]+" "+x,y.filter=void 0===y.filter?x:y.filter+" "+x}m.TweenLite.set(u.bgs,y)}}T.callBackHandling&&T.callBackHandling(e,"parallax","end")}})});